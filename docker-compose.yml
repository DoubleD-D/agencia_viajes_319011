services:
  # Servidor Web 1
  web01:
    build:
      context: .
      dockerfile: Dockerfile
    hostname: servidor-web-01
    volumes:
      - ./src:/var/www/html
    expose:
      - 80

  # Servidor Web 2 (Copia exacta)
  web02:
    build:
      context: .
      dockerfile: Dockerfile
    hostname: servidor-web-02
    volumes:
      - ./src:/var/www/html
    expose:
      - 80

  # Balanceador de Carga
  lb:
    image: haproxy:latest
    ports:
      - "80:80"     # Puerto web
      - "8404:8404" # Estad√≠sticas
    volumes:
      - ./haproxy/haproxy.cfg:/usr/local/etc/haproxy/haproxy.cfg:ro
    depends_on:
      - web01
      - web02
